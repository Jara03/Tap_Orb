default_platform(:ios)

platform :ios do
  desc "Build and upload to TestFlight (CI)"
  lane :beta do

    # ğŸ” Use already-initialized certificates & profiles
    match(
      type: "appstore",
      readonly: true
    )

increment_build_number(
  xcodeproj: "Unity-iPhone.xcodeproj"
)

    # ğŸ— Build the Xcode project generated by Unity
build_app(
  scheme: "Unity-iPhone",
  export_method: "app-store",
  clean: true,
  xcargs: "-allowProvisioningUpdates DEVELOPMENT_TEAM=X2LW2Y6K56"
)


    # ğŸš€ Upload to TestFlight
    upload_to_testflight(
      skip_waiting_for_build_processing: true
    )
  end
end
