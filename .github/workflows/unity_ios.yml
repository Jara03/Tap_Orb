
name: Unity iOS CI/CD (Hybrid)

on:
  push:
    branches: ["main"]
  workflow_dispatch:
  
jobs:
  unity-build:
    if: github.event.inputs.skip_unity_build != 'true'
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4

      - name: Unity batchmode build (iOS)
        run: |
          "C:\Program Files\Unity\Hub\Editor\6000.0.59f2\Editor\Unity.exe" ^
          -batchmode -quit -projectPath . ^
          -executeMethod BuildScript.BuildiOS ^
          -logFile unity_build.log
        shell: cmd

      - name: Debug build folder
        run: |
          echo "Listing Build directory"
          dir Build
        shell: cmd
